/* ===== KNIHA – dvoustrany na desktopu, jednotná velikost i obálka/konec, bez přesahů ===== */

.section-divider{ width:100%; height:1px; background:var(--accent); opacity:.7; }
html, body { overflow-x: hidden; }

.pidi-section{
  max-width: clamp(320px, 96vw, 1440px);
  margin: 0 auto;
  padding: 32px var(--edge) 48px;
  box-sizing: border-box;
  scroll-margin-top: var(--header-h);

  --book-h: clamp(560px, 72vh, 920px);
  --page-w: clamp(320px, 86vw, 920px);
  --radius: 14px;

  --accent: rgb(140,110,68);
  --paper: rgb(242,239,232);

  --edge-ink: rgba(140,110,68,.24);
  --shadow: 0 12px 26px rgba(0,0,0,.07);
  --paper-inset: inset 0 0 0 1px var(--edge-ink),
                 inset 0 24px 30px rgba(255,255,255,.25),
                 inset 0 -16px 18px rgba(0,0,0,.03);

  --spine-w: 28px;
  --anim-ms: 280ms;

  --folio-space: 32px;   /* rezerva na folio – ať do něj nic neleze */
  --media-min: 42%;      /* min. výška bloku s fotkami */
}

/* === DESKTOP: dvoustrana === */
.book{
  position: relative;
  display: grid;
  grid-template-columns: 1fr var(--spine-w) 1fr;
  gap: 0 16px;
  align-items: start;
  justify-items: stretch;
  overflow: clip;
}

/* Režimy */
.book.is-cover .book__spine,
.book.is-cover .page--right{ display:none; }
.book.is-cover .page--left{ grid-column: 1 / -1; }

.book.is-last .book__nav--next{ display:none; } /* žádná šipka vpřed na posledním spreadu */
.book.is-cover .book__nav--prev{ display:none; } /* zpět na obálce nedává smysl */

/* Mobil: jedna stránka */
@media (max-width: 768px){
  .book{
    grid-template-columns: 1fr;
    gap: 16px;
  }
  .book__spine, .page--right{ display:none !important; }
  .page--left{ grid-column: 1; }
}

/* Hřbet knihy */
.book__spine{
  align-self: stretch;
  border-radius: 2px;
  background:
    linear-gradient(to right, rgba(0,0,0,0.05), rgba(0,0,0,0.09) 50%, rgba(0,0,0,0.05));
  box-shadow: inset 1px 0 0 rgba(255,255,255,.35), inset -1px 0 0 rgba(0,0,0,.06);
}

/* Šipky */
.book__nav{
  position:absolute;
  top:50%; transform:translateY(-50%);
  z-index:2;
  width:44px; height:44px;
  border-radius:50%;
  border:1px solid var(--accent);
  background: var(--paper);
  box-shadow: var(--shadow);
  color: var(--accent);
  font-size: 22px; line-height: 1;
  display:flex; align-items:center; justify-content:center;
  cursor:pointer;
}
.book__nav--prev{ left: 8px; }
.book__nav--next{ right: 8px; }
.book__nav:disabled{ opacity:.45; cursor:not-allowed; }

/* Strany */
.page__paper{
  position: relative;
  height: var(--book-h);
  width: min(var(--page-w), 100%);
  background:
    radial-gradient(120% 100% at 50% 0%, rgba(255,255,255,.6), rgba(255,255,255,0)) no-repeat,
    var(--paper);
  border: 1px solid var(--accent);
  border-radius: var(--radius);
  box-shadow: var(--shadow), var(--paper-inset);
  padding: 24px;
  overflow: hidden;
  box-sizing: border-box;
}

/* Obsah stránek – místo pro folio dole */
.page__content{
  height: calc(100% - var(--folio-space));
  display: grid;
  grid-template-rows: auto minmax(var(--media-min), 1fr);
  gap: 14px;
  color: var(--accent);
}

/* Folia (jen kde to JS nastaví) */
.page__folio{
  position: absolute;
  bottom: 10px; left: 16px; right: 16px;
  text-align: left;
  font-size: 12px;
  font-style: italic;
  color: rgba(140,110,68,.85);
  pointer-events: none;
}

/* Obálka/konec – centrovat obsah */
.book.is-cover  .page--left .page__content,
.book.is-end    .page--left .page__content,
.book.is-end    .page--right .page__content{
  display:flex; align-items:center; justify-content:center; text-align:center;
}

/* Titul / CTA */
.cover{ max-width: min(92%, 640px); color: var(--accent); }
.cover__title-line{
  display:block;
  font-family: 'Great Vibes', cursive;
  font-style: italic;
  line-height: 1.05;
}
.cover__title-line--big{   font-size: clamp(34px, 5vw, 56px); }
.cover__title-line--small{ font-size: clamp(26px, 4vw, 38px); }
.cover__cta{
  appearance:none; border:1px solid var(--accent); background:transparent; color:var(--accent);
  border-radius: 999px; padding: 10px 18px; font: inherit; cursor:pointer;
  margin-top: 14px;
}

/* Text */
.content__text{ font: 16px/1.7 'Raleway',sans-serif; }
.content--center .content__text{ text-align:center; }
.content__text p{ margin: 0 0 12px; }

/* Závěrečná věta */
.final-line{
  font-family: 'Great Vibes', cursive;
  font-style: italic;
  font-size: clamp(22px, 3.6vw, 32px);
  color: rgb(120,90,55);
  margin-top: 10px;
}

/* Média – bez ořezu */
.content__media{
  display: grid; gap: 14px; min-height: 0;
  align-content: center; align-items: center; justify-items: center;
}
.content__media--one{ grid-template-columns: 1fr; grid-auto-rows: 1fr; }
.content__media--two{ grid-template-columns: 1fr 1fr; grid-auto-rows: 1fr; }
.photo{ margin:0; width:100%; height:100%; display:grid; place-items:center; }
.photo img{
  max-width: 100%; max-height: 100%;
  width: auto; height: auto;
  object-fit: contain; border-radius: 12px; opacity: 1;
}

/* Stavový štítek pod knihou */
.book__status{ margin-top: 8px; color: var(--accent); font-size: 14px; opacity: .9; }

/* Mobil – fotky 5 & 6 pod sebe */
@media (max-width: 768px){
  .content__media--two{ grid-template-columns: 1fr; grid-auto-rows: 1fr 1fr; }
  .page__paper{ padding: 20px; }
  .content__text{ font-size: 15px; line-height: 1.6; }
  .pidi-section{ --media-min: 48%; } /* trochu víc místa pro fotky na malých displejích */
}

/* Animace papíru při výměně obsahu */
.swap-out-left  { opacity:0; transform: translateX(-8px); }
.swap-out-right { opacity:0; transform: translateX( 8px); }
.swap-in        { opacity:0; transform: translateY(6px); }
.swap-in.active { opacity:1; transform:none; }

@media (prefers-reduced-motion: reduce){
  .photo img{ transition: none; }
}













